{% extends 'base.html' %}
{% block title %}{{ book.title }} - 目錄{% endblock %}
{% block content %}
    <style>
        /* 【新增】書本操作按鈕的樣式 */
        .book-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .book-actions {
            display: flex;
            gap: 10px;
        }
        .action-btn {
            display: inline-block;
            padding: 8px 15px;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 14px;
            border: none;
            cursor: pointer;
            font-family: inherit;
        }
        .edit-btn { background-color: #9d889eff; }
        .delete-btn { background-color: #dc3545; }
        .add-chapter-btn { background-color: #9b7198ff; margin-bottom: 20px; }
        .chapter-list {padding-inline-end: 1em; margin-bottom: 10px;}
        .chapter-list li { display: inline-block; width: 90%; height: auto; border-left: 5px solid #3b1e44ff; padding: 5px;}
        .timestamp { float: right;}
    </style>
    <div class="book-header">
        <div>
            <h1>{{ book.title }}</h1>
            <p style="margin:0;">作者：{{ book.author or '未提供' }}</p>
        </div>
        <div class="book-actions">
            <a href="{{ url_for('view_book_logs', book_id=book.id) }}" class="action-btn edit-btn">編輯記錄</a>
            <a href="{{ url_for('edit_book', book_id=book.id) }}" class="action-btn edit-btn">編輯書本</a>
            <form action="{{ url_for('delete_book', book_id=book.id) }}" method="POST" 
                onsubmit="return confirm('警告！您確定要永久刪除《{{ book.title }}》這本書及其所有章節和留言嗎？此操作無法復原！');">
                <button type="submit" class="action-btn delete-btn">刪除本書</button>
            </form>
        </div>
    </div>

    <a href="{{ url_for('add_chapter', book_id=book.id) }}" class="action-btn add-chapter-btn">為本書新增章節</a>
    
    <h3>章節列表</h3>
    <ul class="chapter-list">
    {% for chapter in chapters %}
        <li>
            <a href="{{ url_for('view_chapter', chapter_id=chapter.id) }}">
                第 {{ chapter.chapter_number }} 章： {{ chapter.title }}
            </a>
            <span class="timestamp">{{ chapter.timestamp }}</span>
        </li>
    {% else %}
        <li>本書還沒有任何章節。</li>
    {% endfor %}
    </ul>
{% endblock %}