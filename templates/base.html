<!DOCTYPE html>
<html lang="zh-TW">
<head>
    {% block head %}
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
        <title>{% block title %}墨語閣{% endblock %}</title>
        <style>
            body { font-family: 'Noto Sans TC', sans-serif; background-color: #f1f5e3ff; color: #333; margin: 0;}
            .navbar { display: flex; background-color: #f2e8f2ff; position: sticky; top: 0; width: 100%; z-index: 999;}
            .navbar a { display: block; color: #3b1e44ff; text-align: center; padding: 14px 16px; text-decoration: none; }
            .navbar a:hover { background-color: #c7adcfff; }
            .dropdown {}
            .dropdown .dropbtn { font-size: 16px; border: none; outline: none; color: #3b1e44ff; padding: 14px 16px; background-color: inherit; font-family: inherit; margin: 0; }
            .dropdown:hover .dropbtn { background-color: #c7adcfff; }
            .dropdown-content { display: none; position: absolute; background-color: #f0e6f7ff; min-width: 160px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1; }
            .dropdown-content a { float: none; color: black; padding: 12px 16px; text-decoration: none; display: block; text-align: left; }
            .dropdown-content a:hover { background-color: #d5c1d5ff; }
            .dropdown:hover .dropdown-content { display: block; }
            .container { max-width: 800px; margin: 20px auto 20px; padding: 20px; background: #f2e8f2ff; color: #3b1e44ff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
            /* 其他共用樣式 */
            .add-book-link { margin-left: auto; /* 【新增】這個 class 會讓它自動推到最右邊 */}
        </style>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    {% endblock %}
</head>
<body>
    <div class="navbar">
        <a href="{{ url_for('index') }}" title="首頁">
            <i class="fa-solid fa-house"></i>
        </a>
        <div class="dropdown">
            <button class="dropbtn">書庫 <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content">
                {# 這是 Jinja2 樣板的註解：迴圈開始，遍歷後端傳來的 all_books 列表中的每一個 book 物件 #}
                {% for book in all_books %}

                    {# 為每一個 book 建立一個連結，點擊後會前往該書的目錄頁 #}
                    <a href="{{ url_for('view_book_toc', book_id=book.id) }}">{{ book.title }}</a>

                {% else %}
                    {# 如果 all_books 是一個空列表，才會顯示這個 #}
                    <a>尚無書本</a>
                
                {% endfor %}
                {# 迴圈結束 #}
            </div>
        </div>
        <a href="{{ url_for('add_book') }}" class="add-book-link" title="新增書本">
            <i class="fas fa-plus-circle"></i>
        </a>
    </div>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
</body>
</html>